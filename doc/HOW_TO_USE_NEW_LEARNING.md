# 🎯 如何使用新的学习系统

## 快速开始

### 1. 启动游戏
```bash
npm run dev
```

### 2. 选择游戏模式
- 选择 **Story Mode** 或 **Exploration Mode**
- 在Story Mode中选择一个故事（如"Hollywood Dream"）

### 3. 接近一个关卡点
- 使用摇杆移动到关卡点附近
- 或在Story Mode中点击"Move"按钮自动移动

### 4. 点击关卡图标
当你足够接近关卡点时，点击地图上的图标

## 新的学习流程

### 📱 用户体验流程

```
点击关卡 
    ↓
🎬 阶段1: 欢迎和场景介绍
    ↓ (点击"Start Learning")
📚 阶段2: 词汇学习 (3-5个单词)
    ↓ (逐个学习，点击"Next Word")
🎧 阶段3: 听力练习 (2-3题)
    ↓ (听音频，选择答案)
🎤 阶段4: 发音练习 (2-3句)
    ↓ (录音说句子，或跳过)
✍️ 阶段5: 句型填空 (3-4题)
    ↓ (输入答案，按Enter)
💭 阶段6: 准备对话
    ↓ (查看学习总结)
💬 阶段7: 自由对话 (+50 Steps!)
    ↓
原有的AI对话系统
```

## 各阶段操作说明

### 📚 词汇学习
**操作**:
- 👁️ 查看单词和翻译
- 🔊 点击"Listen"按钮听发音
- 📖 阅读例句
- ▶️ 点击"Next Word"继续
- ✅ 学完所有单词后进入下一阶段

**Tips**:
- 建议每个单词都听几遍发音
- 尝试跟读例句
- 不需要强制记忆，理解即可

---

### 🎧 听力练习
**操作**:
- 🔊 点击"Play Audio"播放音频
- 👂 仔细听对话
- 📝 阅读问题
- ✅ 选择正确答案
- 🎉 答对后自动进入下一题

**Tips**:
- 可以重复播放多次
- 先听懂大意，再选答案
- 答错没关系，可以重试

---

### 🎤 发音练习
**操作**:
- 📖 查看目标句子
- 🔊 点击"Listen to Example"听示范
- 🎤 点击麦克风按钮开始录音
- 🗣️ 大声说出句子
- ⏹️ 再次点击停止录音
- ⏭️ 或点击"Skip for Now"跳过

**Tips**:
- 在安静环境下练习效果更好
- 允许麦克风权限后才能录音
- 当前版本可以跳过，不影响进度

---

### ✍️ 句型练习
**操作**:
- 📝 阅读题目（有下划线的是需要填的空）
- 💡 查看Hint提示
- ⌨️ 在输入框输入答案
- ⏎ 按Enter键提交
- ✅ 查看反馈（对/错+正确答案）
- ▶️ 答对后自动下一题

**Tips**:
- 答案一般是单个单词或短语
- 注意大小写不敏感
- 答错会显示正确答案，学习后可继续

---

### 💬 自由对话
**操作**:
- 📊 查看学习成果总结
- 🎁 点击"Start Conversation"获得50 steps奖励
- 💬 进入AI对话界面
- 🗨️ 使用所学的词汇和句型对话

**可用功能**:
- 💬 文字输入或选择预设选项
- 🎤 语音输入
- 🔊 朗读NPC的话
- 📚 选中单词查看翻译/添加到flashcard
- ✨ 优化你的句子

---

## 特殊功能

### 🎯 进度条
- 顶部显示整体学习进度
- 7个小点代表7个阶段
- 白色=当前阶段，半透明=已完成，暗色=未开始

### 🎁 奖励系统
- 完成整个学习流程：+50 steps
- 可以用steps移动和购买道具

### 📱 移动设备支持
- 完全响应式设计
- 触摸友好的大按钮
- 语音输入适配移动设备

### ❌ 退出学习
- 随时点击右上角的 ✕ 按钮退出
- 进度不会保存，但可以重新开始

---

## 常见问题

### Q: 我可以跳过某些阶段吗？
A: 目前必须按顺序完成所有阶段。但发音练习可以点击"Skip for Now"跳过。

### Q: 如果我答错了怎么办？
A: 听力和句型练习答错后会显示正确答案，可以重试或继续。不会有惩罚。

### Q: 学习内容是固定的吗？
A: 不是！每个关卡的学习内容都是AI根据场景、角色、难度动态生成的，具有一定随机性。

### Q: 发音练习为什么没有评分？
A: 当前版本使用浏览器自带的语音识别，只能识别文字。未来会升级到专业发音评分系统。

### Q: 学习需要多长时间？
A: 完成所有阶段大约需要10-15分钟，具体取决于你的学习速度。

### Q: 能直接跳到对话吗？
A: 目前不能跳过学习阶段。这是为了确保你有充分准备，对话更有效果。

### Q: 完成学习后还能复习吗？
A: 学习的词汇会自动添加到你的flashcard中，可以在卡片系统中复习。

---

## 技术要求

### 浏览器要求
- ✅ Chrome/Edge（推荐）
- ✅ Safari
- ✅ Firefox
- ✅ 移动浏览器

### 权限需求
- 🔊 **音频播放**: 必需（用于听力和发音示范）
- 🎤 **麦克风**: 可选（用于发音练习）
- 📍 **地理位置**: 可选（用于真实世界移动）

### 网络要求
- 需要稳定的网络连接
- AI内容生成需要调用API
- 首次加载可能需要5-10秒

---

## 开发者调试

### 查看AI生成的内容
打开浏览器控制台，查看生成的学习内容：
```javascript
console.log('Vocabulary:', vocabularyItems);
console.log('Listening:', listeningExercises);
console.log('Patterns:', patternExercises);
console.log('Pronunciation:', pronunciationExercises);
```

### 快速测试
在控制台中修改学习进度：
```javascript
// 跳到某个阶段（仅用于测试）
setLearningProgress(prev => ({
  ...prev,
  currentStage: 'pattern' // 可选: vocabulary, listening, pronunciation, pattern, guided, free
}));
```

### 使用默认内容（无AI）
如果AI服务不可用，系统会自动使用预设的默认学习内容，包含基本的问候语和礼貌用语。

---

## 反馈和建议

如果你有任何问题或建议，欢迎：
- 📝 查看 `LEARNING_SYSTEM.md` 了解设计原理
- 💬 与开发团队联系
- 🐛 报告Bug
- 💡 提出新功能建议

---

**版本**: 1.0.0  
**更新时间**: 2026年1月  
**状态**: ✅ 可用
